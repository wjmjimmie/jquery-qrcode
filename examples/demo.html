<!DOCTYPE html>
<html>
<head>
<title>Demo page</title>

</head>
<body>
<p>
	TODO make a nice looking pure client qrcode generator
	even allow download of the image
</p>


<script src="../src/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="../jquery.qrcode.min.js"></script>
<script>
    function showqrcode(url){
        if(document.getElementById("output")){
            $(document.body).remove($("#output"));
        };
        var div=$('<div></div>');
        div.attr('id','output');
        var div_bg=$('<div></div>');
        div_bg.attr('id','output_bg');
        var div_qr=$('<div></div>');
        div_qr.attr('id','output_qr');
        $(document.body).append(div);
        $('#output').append(div_bg);
        $('#output').append(div_qr);
        jQuery(function(){
            jQuery('#output_qr').qrcode(url);
        })
        $('#output_qr').click(function(){
            $('#output_bg').remove();
            $('#output_qr').remove();
            $('#output').remove();
        });
        $("#output_bg").css({
             height: function () {
                 return $(document).height();
             },
             width:"100%"
        });
        $("#output_bg").css({ "position": "absolute", "text-align": "center", "top": "0px", "left": "0px", "right": "0px", "bottom": "0px", "background": "silver", "visibility": "visible", "filter": "alpha(opacity=50)", "opacity": 0.5});;
        $("#output_qr").css({ "position": "absolute", "text-align": "center", "top": "0px", "left": "0px", "right": "0px", "bottom": "0px", "background": "silver", "background-color":"transparent", "visibility": "visible"});;
}
</script>

<a href="javascript:void(0)" onclick="showqrcode(window.location.href);">showqr</a>

</body>
</html>
